<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:jsf="http://xmlns.jcp.org/jsf"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                template="/WEB-INF/incl/layouts/GCWeb.xhtml">

  <f:metadata>
    <f:viewAction action="#{authenticator.prepareAuthenticationForStep}" />
    <f:viewAction action="#{language.setLocaleCode('en')}" />
  </f:metadata>

  <ui:param name="title" value="Check your #{identity.getWorkingParameter('oobChannel') == 'email' ? 'email' : 'messages'}" />
  <ui:param name="step" value="oob" />
  <ui:param name="locale" value="en" />

  <ui:define name="name">
    <ui:include src="/WEB-INF/incl/content/default/name-#{view.locale.language}.xhtml" />
  </ui:define>

  <ui:define name="styles">
    <style>
      button{
        background-color: var(--gcds-button-primary-default-background);
        color: var(--gcds-button-primary-default-text); 
        min-height: 52px;
        min-width: 100%;
        white-space: normal;
        border-radius: 4.16px;
        border-width:0px;
      }

      button:hover{
        background-color: var(--gcds-color-blue-700);
      }

      label{
        font-weight: 500;
      }
    </style>
  </ui:define>

  <ui:define name="content">

    <div class="container mrgn-tp-lg">

      <div class="col-sm-6 col-md-4">
        <c:if test="${identity.getWorkingParameter('oobChannel') == 'email'}">
          <div class="text-center hidden-xs visible-sm visible-m visible-lg mfa-input-image">
            <img src="\oxauth\ext\resources\assets\desktop-email-open-graphic.png" alt="an open envelope with a piece of paper that has six asterisks on it" class="mrgn-bttm-lg mrgn-tp-lg mfa-input-image-desktop"/>
          </div>
        </c:if>
        <c:if test="${identity.getWorkingParameter('oobChannel') == 'sms'}">
          <div class="text-center hidden-xs visible-sm visible-m visible-lg">
            <img src="\oxauth\ext\resources\assets\desktop-text-message-graphic.png" alt="a mobile phone with a speech bubble that has six asterisks on it" class="mrgn-bttm-lg mrgn-tp-lg mfa-input-image-desktop"/>
          </div>
        </c:if>
    </div>

      <div class="row">
      <div class="col-sm-6 col-md-5 padding-left:0px;">
        <div class="row">
        <h1 property="name" id="wb-cont" dir="ltr" class="gc-thickline">Check your #{identity.getWorkingParameter('oobChannel') == 'email' ? 'email' : 'messages'}</h1>
        </div>
        <div class="wb-frmvld">
          <form jsf:id="oob" jsf:action="#{authenticator.authenticate}" class="form">
            <c:if test="${facesContext.getMessageList('oob:resend').size() gt 0}">
              <div class="alert alert-success">
                <p>
                  <h:message for="resend"/>
                </p>
              </div>
            </c:if>
            <div class="text-center visible-xs hidden-sm hidden-m hidden-lg">
              <c:if test="${identity.getWorkingParameter('oobChannel') == 'email'}">
                <img src="\oxauth\ext\resources\assets\email-graphic-open.png" alt="an open envelope with a piece of paper that has six asterisks on it" class="mrgn-bttm-lg mfa-input-image-mobile"/>
              </c:if>
              <c:if test="${identity.getWorkingParameter('oobChannel') == 'sms'}">
                <img src="\oxauth\ext\resources\assets\text-message-graphic.png" alt="a mobile phone with a speech bubble that has six asterisks on it" class="mrgn-bttm-lg mfa-input-image-mobile"/>
              </c:if>
            </div>
            <div class="row form-group mrg-tp-md">
              <label for="code" class="mrgn-bttm-md ${facesContext.getMessageList('oob:code').size() gt 0 ? 'text-danger' : ''}">
                Enter the 6-digit
                <span class="field-name">code</span> we
                 #{identity.getWorkingParameter('oobChannel') == 'email' ? 'emailed' : 'texted'} you
              </label>
              <h:message for="code" errorClass="label label-danger wb-server-error"/>
              <input id="code" jsf:id="code" type="text" audocomplete="one-time-code" inputmode="numeric" data-rule-digits="true" data-rule-minlength="6" data-rule-maxlength="6" class="form-control mfa-input" />
            </div>
            <div class="row">
              <div class="col-xs-12 col-sm-6 col-md-4 mrgn-tp-md" style="padding:0px;">
                <button jsf:id="signin" id="signin" jsf:action="#{authenticator.authenticate}">Continue to site</button>
              </div>
            </div>
            <div class="row">
              <p class="mrgn-tp-lg text-center text-sm-left text-md-left text-lg-left">
              <a jsf:id="resend" jsf:action="#{authenticator.authenticate}">Resend code</a>
            </p>
            </div>
          </form>
        </div>
      </div>
    </div>
    </div>
  </ui:define>

</ui:composition>
